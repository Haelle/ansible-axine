---
- name: Add KeepassXC repository
  apt_repository:
    repo: 'ppa:phoerious/keepassxc'

- name: Add Insomnia apt key
  apt_key:
    url: https://insomnia.rest/keys/debian-public.key.asc
    state: present

- name: Add Insomnia repository
  apt_repository:
    repo: deb https://dl.bintray.com/getinsomnia/Insomnia /
    state: present

- name: remove buggy packages
  apt:
    name: "{{ item }}"
    state: absent
  with_items:
    - indicator-application # top bar indicator (old Unity) in conflict with the new system (Gnome)

- name: install desktop packages
  apt:
    name: "{{ item }}"
    state: latest
    update_cache: yes
  with_items:
    - xdotool
    - keepassxc
    - insomnia
    - openssh-server
    - ecryptfs-utils
    - calibre
    - vlc
    - browser-plugin-vlc
    - steam
    - openjdk-8-jre
    - vlc
    - rawtherapee
    - gimp
    - notify-osd
    - unity-tweak-tool
    - gnome-tweak-tool
    - exfat-fuse
    - exfat-utils

- name: Passwordless users
  lineinfile:
    path: /etc/sudoers
    regexp: '\%sudo.+ALL=\(ALL:ALL\).+ALL'
    line: '%sudo ALL=(ALL:ALL) NOPASSWD: ALL'
    state: present

- name: RubyMine
  command: sudo snap install rubymine --classic

- name: WebStorm
  command: sudo snap install webstorm --classic

- name: PyCharm
  command: sudo snap install pycharm-community --classic
